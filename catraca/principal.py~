#!/usr/bin/env python
# -*- coding: latin-1 -*-

import os
import time
import thread
from threading import Thread


from dispositivos import leitor
from dispositivos import display
from dispositivos import sensor
#from dispositivos import solenoide
#from dispositivos import led
from catraca import configuracao
from catraca import thread

def main():
    configuracao.desativa_avisos()
    print 'Iniciando...'
    print 'Sistema Operacional: '+ os.name
    display.display("Iniciando...",os.name.upper(),2,3)
    display.display("Catraca","ON-LINE",2,3)
    #leitor.ler_cartao()
    #sensor.ler_sensores()
    #leitor.ler_cartao()
    multithread()

def multithread():
    try:
        #thread.start_new_thread(executa_thread,("Thread-1",2,))
        #thread.start_new_thread(executa_thread,("Thread-2",1,))
        #while True:
        t1 = thread.ThreadCatraca(1, "Thread-1", 1)
        t2 = thread.ThreadCatraca(2, "Thread-2", 2)
        t1.start()
        t2.start()
    except KeyboardInterrupt:
        print '\nInterrupido manualmente'
        #except Exception:
        #print '\nErro geral [Multithread].'
    finally:
        #configuracao.limpa_pinos()
        print 'Threads finalizadas'

def executa_thread(thread,delay):
   #count = 0
   while True:
      time.sleep(delay)
      #count += 1
      print "%s: %s" % ( thread, time.ctime(time.time()) )

def teste_1():
    while True:
        print "minha thread 1"
        time.sleep(1)

def teste_2():
    while True:
        print "minha thread 2"
        time.sleep(2)

